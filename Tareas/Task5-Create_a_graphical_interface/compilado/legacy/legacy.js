(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function r(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function o(e,t){return e.get(i(e,t))}function a(e,t,n){return e.set(i(e,t),n),n}function i(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var c=new WeakMap,l=new WeakMap,u=new WeakMap,s=function(){return e=function e(t,n,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,c,void 0),r(this,l,void 0),r(this,u,void 0),!/^[a-zA-Z\s]+$/.test(t))throw new Error("El nombre solo debe contener letras y espacios");a(c,this,t),a(l,this,n>=0?n:0),a(u,this,o)},(n=[{key:"nombre",get:function(){return o(c,this)},set:function(e){if(!/^([a-zA-ZÁÉÍÓÚáéíóúñÑ\s]+)$/.test(e))throw new Error("El nombre solo debe contener letras y espacios");a(c,this,e)}},{key:"edad",get:function(){return o(l,this)},set:function(e){if(e<0)throw new Error("La edad debe ser un número positivo");a(l,this,e)}},{key:"direccion",get:function(){return o(u,this)},set:function(e){if(!(e instanceof Direccion))throw new Error("La dirección debe ser una instancia de la clase Direccion");a(u,this,e)}},{key:"toString",value:function(){return"Nombre: ".concat(o(c,this),",\nEdad: ").concat(o(l,this),",\nDirección: ").concat(o(u,this))}}])&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function p(e,t,n){return t=b(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function E(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function w(e,t){return e.get(I(e,t))}function S(e,t,n){return e.set(I(e,t),n),n}function I(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var P,O,k,L=new WeakMap,M=new WeakMap,A=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(o=p(this,t,[e,n,r]),L,void 0),E(o,M,void 0),S(L,o,t.contadorId++),S(M,o,[]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,r=[{key:"id",get:function(){return w(L,this)}},{key:"asignaturas",get:function(){return w(M,this)}},{key:"matricular",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=function(){var t=i[a];void 0===w(M,e).find((function(e){return e.nombre===t.nombre}))?(w(M,e).push(t),console.log("Matriculación de ".concat(t.nombre," realizada el ").concat(new Date))):console.log("El estudiante ya está matriculado en ".concat(t.nombre))},a=0,i=n;a<i.length;a++)o()}},{key:"desmatricular",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=function(){var t=i[a];void 0!==w(M,e).find((function(e){return e.nombre===t.nombre}))?(S(M,e,w(M,e).filter((function(e){return e.nombre!==t.nombre}))),console.log("Desmatriculación de ".concat(t.nombre," realizada el ").concat(new Date))):console.log("El estudiante no está matriculado en ".concat(t.nombre))},a=0,i=n;a<i.length;a++)o()}},{key:"calificar",value:function(e,t){if("number"!=typeof t||t<0||t>10)throw new Error("La calificación debe estar entre 0 y 10.");var n=w(M,this).findIndex((function(t){return t.nombre===e.nombre}));-1!==n?(console.log("Calificación añadida a ".concat(e.nombre," para ").concat(this.nombre,": ").concat(t)),w(M,this)[n].calificaciones.push(t),e.calificar(this,t)):console.log("El estudiante ".concat(this.nombre," no está matriculado en ").concat(e.nombre))}},{key:"calcularPromedioEstudiante",value:function(){var e,t=0,n=0,r=f(w(M,this));try{for(r.s();!(e=r.n()).done;){var o=e.value;if(console.log("Asignatura:",o),Array.isArray(o.calificaciones)){var a,i=f(o.calificaciones);try{for(i.s();!(a=i.n()).done;){var c=a.value;console.log("Calificación encontrada:",c,"Tipo:",d(c)),"number"!=typeof c||isNaN(c)?console.log("Calificación inválida (descartada):",c):(t+=c,n++)}}catch(e){i.e(e)}finally{i.f()}}else console.log("asignatura.calificaciones no es un array:",o.calificaciones)}}catch(e){r.e(e)}finally{r.f()}return console.log("Suma final: ".concat(t,", Contador final: ").concat(n)),0===n?0:Number((t/n).toFixed(2))}},{key:"toString",value:function(){return"ID del estudiante: ".concat(w(L,this),",\n\n        Nombre del estudiante: ").concat(this.nombre,",\n\n        Edad del estudiante: ").concat(this.edad,",\n\n        Dirección del estudiante: ").concat(this.direccion.toString(),"\n")}}],r&&y(n.prototype,r),o&&y(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(s);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}function T(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function D(e,t){return e.get(x(e,t))}function C(e,t,n){return e.set(x(e,t),n),n}function x(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}P=A,k=0,(O=h(O="contadorId"))in P?Object.defineProperty(P,O,{value:k,enumerable:!0,configurable:!0,writable:!0}):P[O]=k;var H=new WeakMap,q=new WeakMap,J=new WeakMap,F=function(){return function(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,H,void 0),T(this,q,void 0),T(this,J,void 0),!/^([a-zA-ZÁÉÍÓÚáéíóúñÑ\s]+)$/.test(t))throw new Error("El nombre de la asignatura solo puede contener letras y espacios.");C(H,this,t),C(q,this,[]),C(J,this,new Map)}),[{key:"nombre",get:function(){return D(H,this)}},{key:"calificaciones",get:function(){return D(q,this)}},{key:"estudiantes",get:function(){return D(J,this)}},{key:"calificar",value:function(e,t){if("number"!=typeof t||t<0||t>10)throw new Error("La calificación debe estar entre 0 y 10.");D(J,this).has(e)?(console.log("Calificación añadida: ".concat(t," para ").concat(e.nombre," en ").concat(this.nombre)),D(q,this).push(t)):console.log("".concat(e.nombre," no está matriculado en ").concat(this.nombre))}},{key:"eliminarCalificacion",value:function(e){var t=D(q,this).indexOf(e);if(-1==t)throw new Error("Ningún estudiante ha sacado dicha calificación.");D(q,this).splice(t,1)}},{key:"toString",value:function(){return"Asignatura: ".concat(D(H,this))}}])}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}function _(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function U(e,t){return e.get(Z(e,t))}function R(e,t,n){return e.set(Z(e,t),n),n}function Z(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var G=new WeakMap,K=new WeakMap,Q=new WeakMap,V=new WeakMap,X=new WeakMap,Y=new WeakMap,ee=function(){return function(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r,o,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,G,void 0),_(this,K,void 0),_(this,Q,void 0),_(this,V,void 0),_(this,X,void 0),_(this,Y,void 0),R(G,this,t),R(K,this,n),R(Q,this,r),R(X,this,a),R(Y,this,i),R(V,this,this.validarCodigoPostal(o))}),[{key:"validarCodigoPostal",value:function(e){return/^\d{5}$/.test(e)?e:"00000"}},{key:"toString",value:function(){return"Calle: ".concat(U(G,this),",\n\n        Numero: ").concat(U(K,this),",\n\n        Piso: ").concat(U(Q,this),",\n\n        Código Postal: ").concat(U(V,this),",\n\n        Provincia: ").concat(U(X,this),",\n\n        Localidad: ").concat(U(Y,this),"\n")}}])}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}function ce(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function le(e,t){return e.get(se(e,t))}function ue(e,t,n){return e.set(se(e,t),n),n}function se(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var de=new WeakMap,fe=function(){return function(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce(this,de,void 0),ue(de,this,[]);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,a=n;o<a.length;o++){var i=a[o];this.addEstudiante(i)}}),[{key:"listadoEstudiantes",get:function(){return ne(le(de,this))}},{key:"promedioEstudiantes",value:function(){var e=0,t=0;console.log("Calculando promedio general...");var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=re(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(le(de,this));try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o.calcularPromedioEstudiante();console.log("Promedio de ".concat(o.nombre,":"),a),"number"!=typeof a||isNaN(a)?console.log("Promedio inválido para ".concat(o.nombre,":"),a):(e+=a,t++)}}catch(e){r.e(e)}finally{r.f()}return 0===t?0:e/t}},{key:"addEstudiante",value:function(e){if(le(de,this).includes(e))throw new Error("El estudiante ya se encuentra en la lista, no puede haber duplicados");le(de,this).push(e)}},{key:"eliminarEstudiante",value:function(e){if(!le(de,this).includes(e))throw new Error("El estudiante no se encuentra en el listado");ue(de,this,le(de,this).filter((function(t){return t!==e}))),console.log("Estudiante eliminado con éxito")}},{key:"busquedaPorNombre",value:function(e){var t=le(de,this).find((function(t){return t.nombre.toLowerCase()===e.toLowerCase()}));if(!t)throw new Error("No se encontró ningún estudiante con el nombre: ".concat(e));return t}},{key:"mostrarEstudiantes",value:function(){console.log("Lista de estudiantes:"),le(de,this).forEach((function(e){console.log(e.toString())}))}}])}();function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ye(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function be(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}function ge(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function he(e,t){return e.get(we(e,t))}function Ee(e,t,n){return e.set(we(e,t),n),n}function we(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var Se=new WeakMap,Ie=function(){return function(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ge(this,Se,void 0),Ee(Se,this,[]);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,a=n;o<a.length;o++){var i=a[o];this.addAsignatura(i)}}),[{key:"listadoAsignaturas",get:function(){return ye(he(Se,this))}},{key:"addAsignatura",value:function(e){he(Se,this).push(e)}},{key:"eliminarAsignatura",value:function(e){if(!he(Se,this).includes(e))throw new Error("La asignatura no se encuentra en el listado");Ee(Se,this,he(Se,this).filter((function(t){return t!==e}))),console.log("Asignatura eliminada con éxito")}},{key:"buscarAsignaturas",value:function(e){var t=he(Se,this).find((function(t){return t.nombre.toLowerCase()==e.toLowerCase()}));if(!t)throw new Error("Asignatura(s) con el patrón '".concat(e,"' no encontrada(s)."));return t}},{key:"mostrarAsignaturas",value:function(){he(Se,this).forEach((function(e){console.log(e.toString())}))}}])}();function Pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ke,Le,Me,Ae,Be=new fe,Ne=new Ie;function je(){var e=Be.listadoEstudiantes.map((function(e){return{nombre:e.nombre,edad:e.edad,direccion:{calle:e.direccion.calle,numero:e.direccion.numero,piso:e.direccion.piso,codigoPostal:e.direccion.codigoPostal,provincia:e.direccion.provincia,localidad:e.direccion.localidad}}}));localStorage.setItem("listaEstudiantes",JSON.stringify(e))}function Te(){var e=Ne.listadoAsignaturas.map((function(e){return{nombre:e.nombre}}));localStorage.setItem("listaAsignaturas",JSON.stringify(e))}function De(){var e=Be.listadoEstudiantes.map((function(e){return e.asignaturas.map((function(t){return{estudiante:e.nombre,asignatura:t.nombre}}))})).flat();localStorage.setItem("matriculas",JSON.stringify(e))}(ke=localStorage.getItem("listaEstudiantes"))&&(ke=JSON.parse(ke)).forEach((function(e){var t=new ee(e.direccion.calle,e.direccion.numero,e.direccion.piso,e.direccion.codigoPostal,e.direccion.provincia,e.direccion.localidad),n=new A(e.nombre,e.edad,t);Be.addEstudiante(n)})),(Le=localStorage.getItem("listaAsignaturas"))&&(Le=JSON.parse(Le)).forEach((function(e){var t=new F(e.nombre);Ne.addAsignatura(t)})),(Me=localStorage.getItem("matriculas"))&&(Me=JSON.parse(Me)).forEach((function(e){var t=Be.listadoEstudiantes.find((function(t){return t.nombre===e.estudiante})),n=Ne.listadoAsignaturas.find((function(t){return t.nombre===e.asignatura}));t&&n&&t.matricular(n)})),(Ae=localStorage.getItem("calificaciones"))&&(Ae=JSON.parse(Ae)).forEach((function(e){var t=Be.listadoEstudiantes.find((function(t){return t.nombre===e.estudiante})),n=t.asignaturas.find((function(t){return t.nombre===e.asignatura}));t&&n&&(n.nota=e.nota),n&&(n.nota=e.nota)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("1"),t=document.getElementById("opcion1");t?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion1").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombre").value.trim(),n=document.getElementById("edad").value.trim(),r=document.getElementById("calle").value.trim(),o=document.getElementById("numero").value.trim(),a=document.getElementById("piso").value.trim(),i=document.getElementById("codigopostal").value.trim(),c=document.getElementById("provincia").value.trim(),l=document.getElementById("localidad").value.trim();if(t&&n&&r&&o&&i&&c&&l){var u=new ee(r,o,a,i,c,l),s=new A(t,n,u);try{Be.addEstudiante(s),alert("Estudiante añadido con éxito")}catch(e){alert(e.message)}je()}else alert("Por favor, completa todos los campos obligatorios.")}))):console.error("Formulario dentro de 'opcion1' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("2"),t=document.getElementById("opcion2"),n=document.getElementById("salida2");t?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion2").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEliminar").value.trim();if(t)try{var n=Be.busquedaPorNombre(t);Be.eliminarEstudiante(n)?(Be.eliminarEstudiante(n),je(),alert("Estudiante eliminado con éxito"),je()):alert("No se pudo eliminar el estudiante"),je()}catch(e){console.error("Error al eliminar el estudiante:",e),alert("Ocurrió un error al intentar eliminar el estudiante. Por favor, inténtalo de nuevo.")}else alert("Por favor, introduce el nombre del estudiante a eliminar.")})),null!==localStorage.getItem("listaEstudiantes")&&JSON.parse(localStorage.getItem("listaEstudiantes")).forEach((function(e){n.innerHTML+='<li style="color: white;">'.concat(e.nombre,"</li>")}))):console.error("Formulario dentro de 'opcion2' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("3"),t=document.getElementById("opcion3"),n=document.getElementById("salida3");t?n?(e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),n.addEventListener("click",(function(){try{n.innerHTML="",Be.listadoEstudiantes.forEach((function(e){n.innerHTML+="<p>Nombre: ".concat(e.nombre,", Edad: ").concat(e.edad,", \n                Dirección: ").concat(e.direccion.calle," ").concat(e.direccion.numero,", ").concat(e.direccion.piso,", ").concat(e.direccion.codigoPostal,", ").concat(e.direccion.provincia,", ").concat(e.direccion.localidad,"</p>")}))}catch(e){console.error("Error al mostrar los estudiantes:",e),alert("Ocurrió un error al intentar mostrar los estudiantes. Por favor, inténtalo de nuevo.")}}))):console.error("Elemento con ID 'salida3' no encontrado en el DOM."):console.error("Formulario dentro de 'opcion3' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("4"),t=document.getElementById("opcion4");t?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion4").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreAsignatura").value.trim();if(t){var n=new F(t);try{Ne.addAsignatura(n),alert("Asignatura añadida con éxito"),Te()}catch(e){alert(e.message)}}else alert("Por favor, introduce el nombre de la asignatura.")}))):console.error("Formulario dentro de 'opcion4' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("5"),t=document.getElementById("opcion5"),n=document.getElementById("salida5");t?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion5").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEliminarAsignatura").value.trim();if(t){try{var n=Ne.busquedaPorNombre(t);n?(Ne.eliminarAsignatura(n),alert("Asignatura eliminada con éxito"),Te()):alert("No se encontró ninguna asignatura con ese nombre"),Te()}catch(e){console.error("Error al eliminar la asignatura:",e),alert("Ocurrió un error al intentar eliminar la asignatura. Por favor, inténtalo de nuevo.")}localStorage.setItem("listaAsignaturas",JSON.stringify(Ne.listadoAsignaturas))}else alert("Por favor, introduce el nombre de la asignatura a eliminar.")})),null!==localStorage.getItem("listaAsignaturas")&&JSON.parse(localStorage.getItem("listaAsignaturas")).forEach((function(e){n.innerHTML+='<li style="color: white;">'.concat(e.nombre,"</li>")}))):console.error("Formulario dentro de 'opcion5' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("6"),t=document.getElementById("opcion6"),n=document.getElementById("salida6");t?n?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),n.addEventListener("click",(function(){try{n.innerHTML="",Be.listadoEstudiantes.forEach((function(e){n.innerHTML+="<h3>Nombre del estudiante: ".concat(e.nombre,"</h3>"),n.innerHTML+="<h4>Calificaciones:</h4>",e.asignaturas.forEach((function(e){n.innerHTML+="<p>".concat(e.nombre," - Nota: ").concat(e.nota||"No calificado","</p>")})),n.innerHTML+="<h4>Promedio del estudiante: ".concat(e.calcularPromedioEstudiante().toFixed(2),"</h4>"),n.innerHTML+="<hr>"}))}catch(e){console.error("Error al mostrar las asignaturas:",e),alert("Ocurrió un error al intentar mostrar las asignaturas. Por favor, inténtalo de nuevo.")}}))):console.error("Elemento con ID 'salida6' no encontrado en el DOM."):console.error("Formulario dentro de 'opcion6' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("7"),t=document.getElementById("opcion7");t?(t.style.display="none",e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion7").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEstudiante").value.trim(),n=document.getElementById("nombreAsignatura").value.trim();if(t&&n){try{var r=Be.busquedaPorNombre(t),o=Ne.busquedaPorNombre(n);r&&o?(r.matricular(o),alert("Estudiante matriculado con éxito")):alert("No se encontró el estudiante o la asignatura especificada")}catch(e){return console.error("Error al matricular el estudiante:",e),void alert("Ocurrió un error al intentar matricular el estudiante. Por favor, inténtalo de nuevo.")}De()}else alert("Por favor, introduce el nombre del estudiante y de la asignatura.")}))):console.error("Formulario dentro de 'opcion7' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("8"),t=document.getElementById("opcion8"),n=document.getElementById("salida8");t?(e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion8").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEstudianteDes").value.trim(),r=document.getElementById("nombreAsignaturaDes").value.trim();if(t&&r){try{var o=Be.busquedaPorNombre(t),a=Ne.busquedaPorNombre(r);if(o&&a){o.desmatricular(a),alert("Estudiante desmatriculado con éxito");var i=JSON.parse(localStorage.getItem("matriculas"))||[],c=i.findIndex((function(e){return e.estudiante===t&&e.asignatura===r}));-1!==c&&(i.splice(c,1),localStorage.setItem("matriculas",JSON.stringify(i)))}else alert("No se encontró el estudiante o la asignatura especificada");De();var l=JSON.parse(localStorage.getItem("matriculas"))||[];n.innerHTML="";var u,s=Pe(l);try{for(s.s();!(u=s.n()).done;){var d=u.value;n.innerHTML+='<li style="color: white;">'.concat(d.estudiante," - ").concat(d.asignatura,"</li>")}}catch(e){s.e(e)}finally{s.f()}}catch(e){console.error("Error al desmatricular el estudiante:",e),alert("Ocurrió un error al intentar desmatricular el estudiante. Por favor, inténtalo de nuevo.")}var f=JSON.parse(localStorage.getItem("matriculas"))||[];n.innerHTML="",f.forEach((function(e){n.innerHTML+='<li style="color: white;">'.concat(e.estudiante," - ").concat(e.asignatura,"</li>")}))}else alert("Por favor, introduce el nombre del estudiante y de la asignatura.")}))):console.error("Formulario dentro de 'opcion8' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("9"),t=document.getElementById("opcion9"),n=document.getElementById("salida9");t?(e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion9").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEstudianteCal").value.trim(),r=document.getElementById("nombreAsignaturaCal").value.trim(),o=document.getElementById("nota").value.trim();if(t&&r&&o)if(isNaN(o))alert("Por favor, introduce un valor numérico válido para la nota.");else try{var a=Be.busquedaPorNombre(t),i=Ne.busquedaPorNombre(r);if(a&&i){a.calificar(i,parseFloat(o)),alert("Estudiante calificado con éxito");var c=JSON.parse(localStorage.getItem("calificaciones"))||[];c.push({estudiante:t,asignatura:r,nota:parseFloat(o)}),localStorage.setItem("calificaciones",JSON.stringify(c))}else alert("No se encontró el estudiante o la asignatura especificada");!function(){var e=Be.listadoEstudiantes.map((function(e){return e.asignaturas.map((function(t){return{estudiante:e.nombre,asignatura:t.nombre,nota:t.nota}}))})).flat();localStorage.setItem("calificaciones",JSON.stringify(e))}();var l=JSON.parse(localStorage.getItem("calificaciones"))||[];n.innerHTML="";var u,s=Pe(l);try{for(s.s();!(u=s.n()).done;){var d=u.value;n.innerHTML+='<li style="color: white;">'.concat(d.estudiante," - ").concat(d.asignatura," - ").concat(d.nota,"</li>")}}catch(e){s.e(e)}finally{s.f()}}catch(e){console.error("Error al calificar al estudiante:",e),alert("Ocurrió un error al intentar calificar al estudiante. Por favor, inténtalo de nuevo.")}else alert("Por favor, completa todos los campos antes de continuar.")}))):console.error("Formulario dentro de 'opcion9' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("10"),t=document.getElementById("opcion10");t?(e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion10").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("nombreEstudianteProm").value.trim();if(t)try{var n=Be.busquedaPorNombre(t);if(n){var r=n.calcularPromedioEstudiante();salida10.innerHTML="",salida10.innerHTML+="Promedio de ".concat(n.nombre,": ").concat(r.toFixed(2))}else alert("No se encontró el estudiante especificado")}catch(e){console.error("Error al calcular el promedio del estudiante:",e),alert("Ocurrió un error al intentar calcular el promedio del estudiante. Por favor, inténtalo de nuevo.")}else alert("Por favor, introduce el nombre del estudiante para calcular su promedio.")}))):console.error("Formulario dentro de 'opcion10' no encontrado en el DOM.")})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("11"),t=document.getElementById("opcion11"),n=document.getElementById("salida11");t?(e.addEventListener("click",(function(){t.style.display="none"===t.style.display?"block":"none"})),document.getElementById("opcion11").querySelector("form").addEventListener("submit",(function(e){e.preventDefault();try{n.innerHTML="",n.innerHTML+="<p>El promedio general de todos los estudiantes es: ".concat(Be.promedioEstudiantes().toFixed(2),"</p>")}catch(e){console.error("Error al calcular el promedio general de los estudiantes:",e),alert("Ocurrió un error al intentar calcular el promedio general de los estudiantes. Por favor, inténtalo de nuevo.")}}))):console.error("Elemento con clase 'opcion11' no encontrado en el DOM.")}))})();